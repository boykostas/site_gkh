<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>МУП ЖКХ</title>
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans:ital@0;1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/slider.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header class="page-header">
            <div class="logo-gatchina">
                <img src="img/gerb.png" alt="" class="logo-gatchina-img" class="logo-gatchina" height="50">
            </div>
            <div class="logo-txt">
               <span>Муниципальное унитарное предприятие <br>&laquo;Жилищно-коммунальное хозяйство г. Гатчины&raquo;</span> 
            </div>
            <div class="logo-gkh">
                 <!-- <svg width="100" height="33" viewBox="0 0 100 33">
                    <g transform="translate(0.000000,63.000000) scale(0.100000,-0.100000)"
                    fill="#0b0038">
                    <path d="M51 583 c24 -27 84 -92 134 -146 49 -54 95 -96 101 -95 6 2 42 37 79
                    78 38 41 92 101 122 133 29 31 53 62 53 67 0 6 -39 10 -95 10 l-95 0 0 -60 c0
                    -33 -2 -60 -4 -60 -3 0 -30 27 -62 60 l-57 60 -110 0 -110 0 44 -47z"/>
                    <path d="M368 324 c-156 -168 -285 -310 -286 -315 -2 -5 5 -9 15 -9 11 0 116
                    107 268 272 342 371 331 358 306 358 -14 0 -110 -98 -303 -306z" fill="#ce4900"/>
                    <path d="M435 318 c-221 -240 -284 -314 -270 -317 13 -2 36 15 69 50 27 30 77
                    83 111 119 49 52 311 340 398 438 l20 22 -20 0 c-14 0 -111 -99 -308 -312z" fill="#ce4900"/>
                    <path d="M575 388 c-235 -257 -234 -256 -220 -345 l6 -43 89 0 89 0 3 80 3 80
                    68 -80 68 -80 180 0 179 0 0 88 1 87 83 -88 82 -87 181 0 180 0 58 85 c32 47
                    60 85 61 85 2 0 30 -38 64 -85 l61 -85 65 0 c35 0 64 2 64 5 0 5 -233 342
                    -368 531 l-66 94 -157 0 -157 0 -67 -75 c-37 -41 -71 -75 -76 -75 -5 0 -9 34
                    -9 75 l0 75 -90 0 -90 0 0 -285 c0 -157 -2 -285 -5 -285 -10 0 -245 279 -245
                    291 0 3 52 64 115 135 63 71 115 132 115 137 0 4 -10 7 -22 7 -17 -1 -83 -66
                    -243 -242z m936 44 c39 -57 69 -109 66 -115 -8 -22 -167 -246 -179 -253 -6 -4
                    -26 9 -46 32 -20 21 -75 80 -124 131 -48 50 -88 95 -88 99 0 4 57 65 128 136
                    l127 129 23 -28 c12 -15 54 -74 93 -131z"/>
                    <path d="M1530 625 c0 -8 29 -51 243 -355 209 -297 191 -273 211 -268 20 4
                    -410 621 -436 626 -10 2 -18 1 -18 -3z" fill="#ce4900"/>
                    <path d="M1774 605 c-16 -24 -15 -27 20 -78 59 -83 64 -89 76 -82 6 3 37 47
                    70 96 l61 89 -106 0 c-101 0 -105 -1 -121 -25z"/>
                    <path d="M388 427 c-70 -78 -186 -205 -258 -282 -96 -103 -126 -141 -114 -144
                    17 -3 86 63 219 209 28 30 105 114 173 186 76 83 122 139 122 153 0 11 -3 21
                    -7 20 -5 0 -65 -64 -135 -142z" fill="#ce4900"/>
                    <path d="M1730 541 c0 -27 88 -153 101 -145 5 3 9 10 9 15 0 13 -73 121 -94
                    138 -14 12 -16 11 -16 -8z" fill="#ce4900"/>
                    <path d="M1697 496 c-5 -13 71 -137 92 -150 5 -3 12 1 15 9 3 9 -12 41 -36 75
                    -49 73 -64 86 -71 66z" fill="#ce4900"/>
                    </g>
                </svg> -->
                <!-- <img src="img/logo-gkh.svg" alt="Логотип МУП ЖКХ г. Гатчины" class="logo-gkh" height="50"> -->
            </div>
            <!-- <span></span>
            <span class="emergency-service">Телефон аварийно-деспетчерской службы: 05 8(81371)387-35 8(921)983-32-61 для SMS-сообщений</span>
            <span class="telephone-gkh-header">Телефон приемной: 8(81371)221-36</span> -->
        </header>
        <main class="page-main">
            <nav class="page-nav">
                <ul class="nav-bar">
                    <li><a href="#">Новости</a></li>
                    <li><a href="#">Жителям</a></li>
                    <li><a href="#">Заказчикам</a></li>
                    <li><a href="#">Закупки</a></li>
                    <li><a href="#">Телефоны</a></li>
                    <li><a href="#">Ремонтные работы</a></li>
                    <li><a href="#">Контакты</a></li>
                    <li><a href="#">Вакансии</a></li>
                </ul>
            </nav>
            <section class="page-content">
                <span class="content-info-header">Информация об управляющей компании МУП ЖКХ г. Гатчины</span>
                    <div class="slider">
                        <div class="slider__wrapper">
                          <div class="slider__items">
                            <div class="slider__item">
                              <div style="height: 400px; background-image: url(img/slider-img-1.jpg);"></div>
                            </div>
                            <div class="slider__item">
                              <div style="height: 400px; background-image: url(img/slider-img-2.jpg);"></div>
                            </div>
                            <div class="slider__item">
                              <div style="height: 400px; background-image: url(img/slider-img-3.jpg);"></div>
                            </div>
                            <div class="slider__item">
                              <div style="height: 400px; background-image: url(img/slider-img-4.jpg);"></div>
                            </div>
                          </div>
                        </div>
                        <a class="slider__control slider__control_prev" href="#" role="button"></a>
                        <a class="slider__control slider__control_next" href="#" role="button"></a>
                    </div>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque porro aliquam corporis modi, esse odit consequatur quae consectetur adipisci nobis rem, eius sint accusamus aperiam quas, non explicabo impedit. In modi ipsum ullam repellendus quo earum aspernatur, voluptatibus corporis repellat dolorum possimus aut maiores dolores doloremque recusandae? Quos, accusantium pariatur ipsum iusto soluta placeat at autem ab eligendi vel voluptates aspernatur minima? Assumenda sint eius at repudiandae quasi aperiam quam. Cupiditate, ipsa. Omnis modi impedit accusantium ipsa doloribus aliquid quas, rem molestiae, neque voluptatibus voluptatem laudantium deserunt aliquam eligendi soluta, accusamus distinctio, iste. Voluptas aperiam eius provident inventore vel officia molestiae illo maxime perspiciatis ullam non laudantium ipsam alias excepturi quibusdam minima, exercitationem quidem numquam atque laboriosam amet porro doloribus. Ea dolores, perspiciatis impedit quidem, provident laborum deserunt debitis itaque totam dolore numquam dolorum eaque a quaerat tenetur quae sed quo recusandae ipsum nesciunt amet quisquam iure aliquam ab eum? Deserunt sed libero labore consectetur esse nostrum, nesciunt necessitatibus quae assumenda nihil quibusdam nam voluptates aliquam harum vel! Mollitia quasi, quo laborum aspernatur error aut perferendis culpa repellat nesciunt, eius enim, rerum molestias! Debitis, voluptates. A, molestias, nulla! Numquam est nemo, voluptatibus inventore totam, architecto ducimus suscipit ab! Aspernatur, maxime.</p>
            </section>
            <aside class="page-aside">
                <a href="http://www.731pp.ru/" target="_blank"><img src="img/731.png" alt="731pp" class="image" height="130"></a>
                <img src="#" alt="АО ЕИРЦ" class="image" height="200">
            </aside>
        </main>
        <footer class="page-footer">
            <span>Copyright &copy МУП ЖКХ г. Гатчины</span> 
        </footer>
    </div>

    <script>
    'use strict';
    var slideShow = (function () {
      return function (selector, config) {
        var
          _slider = document.querySelector(selector), // основный элемент блока
          _sliderContainer = _slider.querySelector('.slider__items'), // контейнер для .slider-item
          _sliderItems = _slider.querySelectorAll('.slider__item'), // коллекция .slider-item
          _sliderControls = _slider.querySelectorAll('.slider__control'), // элементы управления
          _currentPosition = 0, // позиция левого активного элемента
          _transformValue = 0, // значение транфсофрмации .slider_wrapper
          _transformStep = 100, // величина шага (для трансформации)
          _itemsArray = [], // массив элементов
          _timerId,
          _indicatorItems,
          _indicatorIndex = 0,
          _indicatorIndexMax = _sliderItems.length - 1,
          _stepTouch = 50,
          _config = {
            isAutoplay: false, // автоматическая смена слайдов
            directionAutoplay: 'next', // направление смены слайдов
            delayAutoplay: 5000, // интервал между автоматической сменой слайдов
            isPauseOnHover: true // устанавливать ли паузу при поднесении курсора к слайдеру
          };

        // настройка конфигурации слайдера в зависимости от полученных ключей
        for (var key in config) {
          if (key in _config) {
            _config[key] = config[key];
          }
        }

        // наполнение массива _itemsArray
        for (var i = 0, length = _sliderItems.length; i < length; i++) {
          _itemsArray.push({ item: _sliderItems[i], position: i, transform: 0 });
        }

        // переменная position содержит методы с помощью которой можно получить минимальный и максимальный индекс элемента, а также соответствующему этому индексу позицию
        var position = {
          getItemIndex: function (mode) {
            var index = 0;
            for (var i = 0, length = _itemsArray.length; i < length; i++) {
              if ((_itemsArray[i].position < _itemsArray[index].position && mode === 'min') || (_itemsArray[i].position > _itemsArray[index].position && mode === 'max')) {
                index = i;
              }
            }
            return index;
          },
          getItemPosition: function (mode) {
            return _itemsArray[position.getItemIndex(mode)].position;
          }
        };

        // функция, выполняющая смену слайда в указанном направлении
        var _move = function (direction) {
          var nextItem, currentIndicator = _indicatorIndex;;
          if (direction === 'next') {
            _currentPosition++;
            if (_currentPosition > position.getItemPosition('max')) {
              nextItem = position.getItemIndex('min');
              _itemsArray[nextItem].position = position.getItemPosition('max') + 1;
              _itemsArray[nextItem].transform += _itemsArray.length * 100;
              _itemsArray[nextItem].item.style.transform = 'translateX(' + _itemsArray[nextItem].transform + '%)';
            }
            _transformValue -= _transformStep;
            _indicatorIndex = _indicatorIndex + 1;
            if (_indicatorIndex > _indicatorIndexMax) {
              _indicatorIndex = 0;
            }
          } else {
            _currentPosition--;
            if (_currentPosition < position.getItemPosition('min')) {
              nextItem = position.getItemIndex('max');
              _itemsArray[nextItem].position = position.getItemPosition('min') - 1;
              _itemsArray[nextItem].transform -= _itemsArray.length * 100;
              _itemsArray[nextItem].item.style.transform = 'translateX(' + _itemsArray[nextItem].transform + '%)';
            }
            _transformValue += _transformStep;
            _indicatorIndex = _indicatorIndex - 1;
            if (_indicatorIndex < 0) {
              _indicatorIndex = _indicatorIndexMax;
            }
          }
          _sliderContainer.style.transform = 'translateX(' + _transformValue + '%)';
          _indicatorItems[currentIndicator].classList.remove('active');
          _indicatorItems[_indicatorIndex].classList.add('active');
        };

        // функция, осуществляющая переход к слайду по его порядковому номеру
        var _moveTo = function (index) {
          var i = 0, direction = (index > _indicatorIndex) ? 'next' : 'prev';
          while (index !== _indicatorIndex && i <= _indicatorIndexMax) {
            _move(direction);
            i++;
          }
        };

        // функция для запуска автоматической смены слайдов через промежутки времени
        var _startAutoplay = function () {
          if (!_config.isAutoplay) {
            return;
          }
          _stopAutoplay();
          _timerId = setInterval(function () {
            _move(_config.directionAutoplay);
          }, _config.delayAutoplay);
        };

        // функция, отключающая автоматическую смену слайдов
        var _stopAutoplay = function () {
          clearInterval(_timerId);
        };

        // функция, добавляющая индикаторы к слайдеру
        var _addIndicators = function () {
          var indicatorsContainer = document.createElement('ol');
          indicatorsContainer.classList.add('slider__indicators');
          for (var i = 0, length = _sliderItems.length; i < length; i++) {
            var sliderIndicatorsItem = document.createElement('li');
            if (i === 0) {
              sliderIndicatorsItem.classList.add('active');
            }
            sliderIndicatorsItem.setAttribute("data-slide-to", i);
            indicatorsContainer.appendChild(sliderIndicatorsItem);
          }
          _slider.appendChild(indicatorsContainer);
          _indicatorItems = _slider.querySelectorAll('.slider__indicators > li')
        };

        var _isTouchDevice = function () {
          return !!('ontouchstart' in window || navigator.maxTouchPoints);
        };

        // функция, осуществляющая установку обработчиков для событий 
        var _setUpListeners = function () {
          var _startX = 0;
          if (_isTouchDevice()) {
            _slider.addEventListener('touchstart', function (e) {
              _startX = e.changedTouches[0].clientX;
              _startAutoplay();
            });
            _slider.addEventListener('touchend', function (e) {
              var
                _endX = e.changedTouches[0].clientX,
                _deltaX = _endX - _startX;
              if (_deltaX > _stepTouch) {
                _move('prev');
              } else if (_deltaX < -_stepTouch) {
                _move('next');
              }
              _startAutoplay();
            });
          } else {
            for (var i = 0, length = _sliderControls.length; i < length; i++) {
              _sliderControls[i].classList.add('slider__control_show');
            }
          }
          _slider.addEventListener('click', function (e) {
            if (e.target.classList.contains('slider__control')) {
              e.preventDefault();
              _move(e.target.classList.contains('slider__control_next') ? 'next' : 'prev');
              _startAutoplay();
            } else if (e.target.getAttribute('data-slide-to')) {
              e.preventDefault();
              _moveTo(parseInt(e.target.getAttribute('data-slide-to')));
              _startAutoplay();
            }
          });
          document.addEventListener('visibilitychange', function () {
            if (document.visibilityState === "hidden") {
              _stopAutoplay();
            } else {
              _startAutoplay();
            }
          }, false);
          if (_config.isPauseOnHover && _config.isAutoplay) {
            _slider.addEventListener('mouseenter', function () {
              _stopAutoplay();
            });
            _slider.addEventListener('mouseleave', function () {
              _startAutoplay();
            });
          }
        };

        // добавляем индикаторы к слайдеру
        _addIndicators();
        // установливаем обработчики для событий
        _setUpListeners();
        // запускаем автоматическую смену слайдов, если установлен соответствующий ключ
        _startAutoplay();

        return {
          // метод слайдера для перехода к следующему слайду
          next: function () {
            _move('next');
          },
          // метод слайдера для перехода к предыдущему слайду          
          left: function () {
            _move('prev');
          },
          // метод отключающий автоматическую смену слайдов
          stop: function () {
            _config.isAutoplay = false;
            _stopAutoplay();
          },
          // метод запускающий автоматическую смену слайдов
          cycle: function () {
            _config.isAutoplay = true;
            _startAutoplay();
          }
        }
      }
    }());

    slideShow('.slider', {
      isAutoplay: true
    });
  </script>
</body>
</html>